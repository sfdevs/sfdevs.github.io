<!doctype html><html lang=en><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>SFDevs | Trying out AWS.Tools in Docker</title><meta name=description content="If you’re a frequent user of the AWS Powershell tools, you’ve probably had this experience: you go to run a couple commands against your AWS environment. You do it all the time, so you know to type
But out of force of habit you type
And hit the tab key. Now you’re sitting and waiting for several minutes while Powershell loads all of the AWS modules for IAM, ECS, Cloudfront, S3, etc, etc, etc, even though you only want to interact with EC2."><link rel="shortcut icon" href=favicon.ico type=image/x-icon><link rel=icon href=favicon.ico type=image/x-icon><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.64.1"><script defer src=https://use.fontawesome.com/releases/v5.8.1/js/solid.js integrity=sha384-IA6YnujJIO+z1m4NKyAGvZ9Wmxrd4Px8WFqhFcgRmwLaJaiwijYgApVpo1MV8p77 crossorigin=anonymous></script><script defer src=https://use.fontawesome.com/releases/v5.8.1/js/brands.js integrity=sha384-rUOIFHM3HXni/WG5pzDhA1e2Js5nn4bWudTYujHbbI9ztBIxK54CL4ZNZWwcBQeD crossorigin=anonymous></script><script defer src=https://use.fontawesome.com/releases/v5.8.1/js/fontawesome.js integrity=sha384-EMmnH+Njn8umuoSMZ3Ae3bC9hDknHKOWL2e9WJD/cN6XLeAN7tr5ZQ0Hx5HDHtkS crossorigin=anonymous></script><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Montserrat:500,900|Knewave"><link rel=stylesheet href=/styles/main.9c4982b854aa3918177d1f17977e6e14de523c80837b521ddeaf47ad11decd09.css integrity="sha256-nEmCuFSqORgXfR8Xl35uFN5SPICDe1Id3q9HrRHezQk="><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#6cc091><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#6cc091"><link rel=canonical href=https://rollingwebsphere.home.blog/2020/02/04/trying-out-aws-tools-in-docker/><meta property="og:title" content="Trying out AWS.Tools in Docker"><meta property="og:description" content="If you’re a frequent user of the AWS Powershell tools, you’ve probably had this experience: you go to run a couple commands against your AWS environment. You do it all the time, so you know to type
But out of force of habit you type
And hit the tab key. Now you’re sitting and waiting for several minutes while Powershell loads all of the AWS modules for IAM, ECS, Cloudfront, S3, etc, etc, etc, even though you only want to interact with EC2."><meta property="og:type" content="article"><meta property="og:url" content="https://sfdevs.com/posts/external_posts/2020-02-04-brian-olson-trying-out-aws-tools-in-docker/"><meta property="article:published_time" content="2020-02-04T22:08:00+00:00"><meta property="article:modified_time" content="2020-02-04T22:08:00+00:00"><meta property="fb:app_id" content="1171673062996168"><meta itemprop=name content="Trying out AWS.Tools in Docker"><meta itemprop=description content="If you’re a frequent user of the AWS Powershell tools, you’ve probably had this experience: you go to run a couple commands against your AWS environment. You do it all the time, so you know to type
But out of force of habit you type
And hit the tab key. Now you’re sitting and waiting for several minutes while Powershell loads all of the AWS modules for IAM, ECS, Cloudfront, S3, etc, etc, etc, even though you only want to interact with EC2."><meta itemprop=datePublished content="2020-02-04T22:08:00+00:00"><meta itemprop=dateModified content="2020-02-04T22:08:00+00:00"><meta itemprop=wordCount content="578"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Trying out AWS.Tools in Docker"><meta name=twitter:description content="If you’re a frequent user of the AWS Powershell tools, you’ve probably had this experience: you go to run a couple commands against your AWS environment. You do it all the time, so you know to type
But out of force of habit you type
And hit the tab key. Now you’re sitting and waiting for several minutes while Powershell loads all of the AWS modules for IAM, ECS, Cloudfront, S3, etc, etc, etc, even though you only want to interact with EC2."><meta name=twitter:site content="@_sfdevs"><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-89597259-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script>window.fbAsyncInit=function(){FB.init({appId:'1171673062996168',cookie:true,xfbml:true,version:'v3.2'});FB.AppEvents.logPageView();};(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return;}
js=d.createElement(s);js.id=id;js.src="https://connect.facebook.net/en_US/sdk.js";fjs.parentNode.insertBefore(js,fjs);}(document,'script','facebook-jssdk'));</script><body class=subpage><header id=header><div class=inner><a href=https://sfdevs.com/ class=logo>SFDevs</a><nav id=nav role=menu><a href=/about/><span>About</span></a>
<a href=/posts/><span>Community Posts</span></a>
<a href=/jobs/><span>Jobs</span></a></nav><a href=#navPanel class=navPanelToggle><span class="fa fa-bars"></span></a></div></header><section class=wrapper><div class=inner><header class=align-center><h1>Trying out AWS.Tools in Docker</h1></header><p>If you’re a frequent user of the AWS Powershell tools, you’ve probably had this experience: you go to run a couple commands against your AWS environment. You do it all the time, so you know to type</p><p>But out of force of habit you type</p><p>And hit the tab key. Now you’re sitting and waiting for several minutes while Powershell loads all of the AWS modules for IAM, ECS, Cloudfront, S3, etc, etc, etc, even though you only want to interact with EC2. A few minutes later it’s done, and you start typing again</p><p>And without thinking you hit the tab key again, and wait for another few minutes while Powershell loads parameter completion.</p><p>Well, AWS recently released <a href=https://docs.aws.amazon.com/powershell/latest/userguide/pstools-getting-set-up-windows.html#ps-installing-awstools>AWS.Tools </a>for Powershell. It’s a modularized version of the AWS Powershell tools that promises better load times because you can pick and choose the modules for AWS services that you want. Like most of you, I’m hesitant to try anything new fangled on my main laptop right away. Your boss probably likes hearing, “I can’t help with that issue right now, I broke my management environment” as much as mine does.</p><p>So I figured I’d try installing the tools in a docker container first. My current windows 10 version is 1803, so I’ll be using</p><p>(Yes, I know server nano is smaller. Yes, I know you can run AWS.Tools on linux with .NET Core. I use a windows laptop, so I’d like to see AWS.Tools running in as close to my laptop as I can get)</p><p>The -v is to map my AWS credentials into the container to use after I install AWS.Tools</p><p>Next, following the install instructions <a href=https://docs.aws.amazon.com/powershell/latest/userguide/pstools-getting-set-up-windows.html#ps-installing-awstools>here</a> I run</p><p>I had to accept a new NuGet provider when prompted</p><p>And then accept that AWS is technically an untrusted repository</p><p>Easy enough! Next I tried to use the build in installer function that handles dependencies for you. I’ll start with just the EC2 module for simplicity</p><p>This command sat for quite a while for me, but when it was done I couldn’t import or use the modle</p><p>I haven’t taken the time to troubleshoot this, but it seems like the documentation promises to install to <code>$env:ProgramFiles\Powershell\Modules</code> when the container has <code>$env:ProgramFiles\WindowsPowershell\modules</code> </p><p>At any rate, let’s try just grabbing the modules ourselves instead of letting AWS abstract it away.</p><p>I ran these commands to grab the common module (used by all the AWS.Tools modules) and the EC2 module directly</p><p>Which seems to work great, and I can now interact with AWS like I’d expect</p><p>Now that I’ve got it working, I removed all of the modules from my session with</p><p>So I can compare importing the module versions to the monolithic tools on my laptop. I’ll use this command in both environments to see how long it takes to load the modules, and query EC2 for the results:</p><p>Loading the EC2 module result was 00:00:01.5066032, so under 2 seconds! The next run was much faster, with all of the module already loaded</p><p>Under a second! Let’s try that with the old AWSPowershellTools back on my laptop (which loads all of the AWS powershell modules when you call any command)</p><p>Over 8 seconds! It’s not a huge price to pay, but I’ll take a second load time over 8 any day.</p><p>Finally, I used this blog post to submit a new issue: <a href=https://github.com/aws/aws-tools-for-powershell/issues/118>https://github.com/aws/aws-tools-for-powershell/issues/118</a>. I haven’t had time to debug what could be wrong, hoping someone else can pick up the torch.</p></div></section><footer id=footer><div class=inner><h3>Get in touch</h3><iframe src="https://services.cognitoforms.com/f/kLQF89okA06rKO0JYMWNOg?id=1" style=position:relative;width:1px;min-width:100%;*width:100% frameborder=0 scrolling=yes seamless height=465 width=100%></iframe>
<script src=https://services.cognitoforms.com/scripts/embed.js></script><div class="row footer__copy-social"><div class="copyright 6u 12u$(small)">&copy; 2020 Sioux Falls Developer's Group.</div><div class="6u 12u$(small) social"><div class=footer__social><span class=follow__social__copy>Follow SFDevs</span>
<a href=https://www.facebook.com/sfdevs title="Follow us on Facebook" class=like-us target=_blank rel=noopener><i class="fab fa-facebook fa-2x"></i></a><a href=https://twitter.com/_sfdevs title="Follow us on Twitter" class=like-us target=_blank rel=noopener><i class="fab fa-twitter fa-2x"></i></a></div></div></div></div></footer><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin=anonymous></script><script src=/js/skel.min.js></script><script src=/js/main.min.js></script></body></html>