<!DOCTYPE html>
<html lang="en"><meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>SFDevs  | Creating Exception types on-the-fly in modern PHP</title>
<meta name="description" content="We pioneered a pattern for exception handling for Zend Framework back as we initially began development on version 2 around seven years ago. The pattern looks like this:
 We would create a marker ExceptionInterface for each package. We would extend SPL exceptions and implement the package marker interface when doing so.  What this gave users was the ability to catch in three ways:
 They could catch the most specific exception type by class name.">
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
<link rel="icon" href="favicon.ico" type="image/x-icon">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="generator" content="Hugo 0.55.4" />
<script defer src="https://use.fontawesome.com/releases/v5.8.1/js/solid.js" integrity="sha384-IA6YnujJIO+z1m4NKyAGvZ9Wmxrd4Px8WFqhFcgRmwLaJaiwijYgApVpo1MV8p77" crossorigin="anonymous"></script>
<script defer src="https://use.fontawesome.com/releases/v5.8.1/js/brands.js" integrity="sha384-rUOIFHM3HXni/WG5pzDhA1e2Js5nn4bWudTYujHbbI9ztBIxK54CL4ZNZWwcBQeD" crossorigin="anonymous"></script>
<script defer src="https://use.fontawesome.com/releases/v5.8.1/js/fontawesome.js" integrity="sha384-EMmnH+Njn8umuoSMZ3Ae3bC9hDknHKOWL2e9WJD/cN6XLeAN7tr5ZQ0Hx5HDHtkS" crossorigin="anonymous"></script>




<link rel="stylesheet" href="/styles/main.b8186dec878e18853a059792b7bd6cc35a21a0505c9c9dfdd756851c89f3ef30.css" integrity="sha256-uBht7IeOGIU6BZeSt71sw1ohoFBcnJ3911aFHInz7zA=">

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#6cc091">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#6cc091"><meta property="og:title" content="Creating Exception types on-the-fly in modern PHP" />
<meta property="og:description" content="We pioneered a pattern for exception handling for Zend Framework back as we initially began development on version 2 around seven years ago. The pattern looks like this:
 We would create a marker ExceptionInterface for each package. We would extend SPL exceptions and implement the package marker interface when doing so.  What this gave users was the ability to catch in three ways:
 They could catch the most specific exception type by class name." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sfdevs.com/posts/2018-12-05-phly-boy-phly-matthew-weier-o-phinney-creating-exception-types-on-the-fly-in-modern-php/" />
<meta property="article:published_time" content="2018-12-05T22:26:00&#43;00:00"/>
<meta property="article:modified_time" content="2018-12-05T22:26:00&#43;00:00"/>

  <meta property="fb:app_id" content="1171673062996168" />

<meta itemprop="name" content="Creating Exception types on-the-fly in modern PHP">
<meta itemprop="description" content="We pioneered a pattern for exception handling for Zend Framework back as we initially began development on version 2 around seven years ago. The pattern looks like this:
 We would create a marker ExceptionInterface for each package. We would extend SPL exceptions and implement the package marker interface when doing so.  What this gave users was the ability to catch in three ways:
 They could catch the most specific exception type by class name.">


<meta itemprop="datePublished" content="2018-12-05T22:26:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-12-05T22:26:00&#43;00:00" />
<meta itemprop="wordCount" content="313">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Creating Exception types on-the-fly in modern PHP"/>
<meta name="twitter:description" content="We pioneered a pattern for exception handling for Zend Framework back as we initially began development on version 2 around seven years ago. The pattern looks like this:
 We would create a marker ExceptionInterface for each package. We would extend SPL exceptions and implement the package marker interface when doing so.  What this gave users was the ability to catch in three ways:
 They could catch the most specific exception type by class name."/>
<meta name="twitter:site" content="@_sfdevs"/>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-89597259-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

<script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '1171673062996168',
        cookie     : true,
        xfbml      : true,
        version    : 'v3.2'
      });
      FB.AppEvents.logPageView();
    };

    (function(d, s, id){
       var js, fjs = d.getElementsByTagName(s)[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement(s); js.id = id;
       js.src = "https://connect.facebook.net/en_US/sdk.js";
       fjs.parentNode.insertBefore(js, fjs);
     }(document, 'script', 'facebook-jssdk'));
  </script>

<body class="subpage"><header id="header">
    <div class="inner">
        <a href="https://sfdevs.com/" class="logo">SFDevs</a>
        <nav id="nav" role="menu">
        
        
            <a class="" href="/about/">
                <span>About</span>
            </a>
        
            <a class="" href="/posts/">
                <span>Community Posts</span>
            </a>
        
            <a class="" href="/jobs/">
                <span>Jobs</span>
            </a>
        
        </nav>
        <a href="#navPanel" class="navPanelToggle"><span class="fa fa-bars"></span></a>
    </div>
</header>

<section class="wrapper">
    <div class="inner">
    <header class="align-center">
        <h1>Creating Exception types on-the-fly in modern PHP</h1>
    </header>

    <p>We pioneered a pattern for exception handling for Zend Framework back as we
initially began development on version 2 around seven years ago. The pattern
looks like this:</p>

<ul>
<li>We would create a marker <code>ExceptionInterface</code> for each package.
<li>We would extend <a href="http://php.net/manual/en/spl.exceptions.php">SPL exceptions</a>
and implement the package marker interface when doing so.</li></li>
</ul>

<p>What this gave users was the ability to catch in three ways:</p>

<ul>
<li>They could catch the most specific exception type by class name.</li>
<li>They could catch all package-level exceptions using the marker interface.</li>
<li>The could catch general exceptions using the associated SPL type.</li>
</ul>

<p>So, as an example:</p>

<pre><code>try {
    $do-&amp;gt;something();
} catch (MostSpecificException $e) {
} catch (PackageLevelExceptionInterface $e) {
} catch (\RuntimeException $e) {
}

</code></pre>

<p>This kind of granularity is really nice to work with. So nice that some
standards produced by <a href="https://www.php-fig.org/">PHP-FIG</a> now ship them, such as
<a href="https://www.php-fig.org/psr/psr-11/">PSR-11</a>, which ships a
<code>ContainerExceptionInterface</code> and a <code>NotFoundExceptionInterface</code>.</p>

<blockquote>
<p>One thing we've started doing recently as we make packages support only PHP 7
versions is to have the marker `ExceptionInterface` extend the `Throwable`
interface; this ensures that implementations **must** be able to be thrown!</p>
</blockquote>

<p>So, what happens when you&rsquo;re writing a one-off implementation of something that
is expected to throw an exception matching one of these interfaces?</p>

<p>Why, use an anonymous class, of course!</p>

<p>As an example, I was writing up some documentation that illustrated a custom
<code>ContainerInterface</code> implementation today, and realized I needed to throw an
exception at one point, specifically a <code>Psr\Container\NotFoundExceptionInterface</code>.
I wrote up the following snippet:</p>

<pre><code>$message = sprintf(/* ... */);
throw new class($message) extends RuntimeException implements
    NotFoundExceptionInterface {
};

</code></pre>

<p>Done!</p>

<p>This works because <code>RuntimeException</code> takes a message as the first
constructor argument; by extending that class, I gain that behavior. Since
<code>NotFoundExceptionInterface</code> is a marker interface, I did not need to add any
additional behavior, so this inline example works out-of-the-box.</p>

<p>What else are <strong>you</strong> using anonymous classes for?</p>

    </div>
</section>
<footer id="footer">
    <div class="inner">
        <h3>Get in touch</h3>

        <iframe src="https://services.cognitoforms.com/f/kLQF89okA06rKO0JYMWNOg?id=1" style="position:relative;width:1px;min-width:100%;*width:100%;" frameborder="0" scrolling="yes" seamless="seamless" height="465" width="100%"></iframe>
        <script src="https://services.cognitoforms.com/scripts/embed.js"></script>

        <div class="copyright">
            &copy; 2019 Sioux Falls Developer's Group.
        </div>
    </div>
</footer>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
        crossorigin="anonymous"></script>
<script src="/js/skel.min.js"></script>
<script src="/js/main.min.js"></script>
</body>
</html>
